[
    {
        "name": "ForceAddSkill",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "if;v(\"SkillNidToForce\") != None and len([skill for skill in unit.skills if any([component.nid == 'feat' for component in skill.components])]) > 2",
            "",
            "    level_var;SkillNidToRemove;[skill.nid for skill in unit.skills if any([component.nid == 'feat' for component in skill.components])][0]",
            "    level_var;SkillNameToRemove;[skill.name for skill in unit.skills if any([component.nid == 'feat' for component in skill.components])][0]",
            "    level_var;SkillDescToRemove;\"Grants \" + v(\"SkillNameToRemove\") + \":\\n\" + [skill.desc for skill in unit.skills if any([component.nid == 'feat' for component in skill.components])][0]",
            "",
            "    # Our ritual sacrifice",
            "    make_generic;;Citizen;1;other;None",
            "    give_item;{created_unit};GenericManual;no_banner",
            "",
            "    change_item_name;{created_unit};GenericManual;{v:SkillNameToRemove}",
            "    change_item_desc;{created_unit};GenericManual;{v:SkillDescToRemove}",
            "    add_item_component;{created_unit};GenericManual;status_on_hit;v(\"SkillNidToRemove\")",
            "",
            "    remove_skill;{unit};{v:SkillNidToRemove}",
            "    give_skill;{unit};{v:SkillNidToForce}",
            "",
            "    move_item;{created_unit};convoy;GenericManual",
            "    sound;Item",
            "    alert;The {e:v(\"SkillNameToRemove\")} Manual was placed in the convoy;;{v:SkillNidToRemove}",
            "",
            "    game_var;SkillNidToForce;None",
            "",
            "else",
            "",
            "    give_skill;{unit};{v:SkillNidToForce}",
            "",
            "end"
        ]
    }
]