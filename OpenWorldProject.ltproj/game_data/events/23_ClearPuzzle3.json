[
    {
        "name": "ClearPuzzle3",
        "trigger": "unit_wait",
        "level_nid": "23",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 10,
        "_source": [
            "if;v(\"PuzzleCompleted\") and game.board.get_unit((9,10)) and game.board.get_unit((9,10)).nid == \"Simon\"",
            "",
            "remove_group;PuzzleCrates3",
            "show_layer;toppuzzlecomplete",
            "if;game.board.get_unit((5,8))",
            "    show_layer;toppuzzlecompletenoleft",
            "elif;game.board.get_unit((6,8))",
            "    show_layer;toppuzzlecompletenomid",
            "else",
            "    show_layer;toppuzzlecompletenoright",
            "end",
            "",
            "reset;Anuki",
            "",
            "wait;500",
            "",
            "move_unit;Lupus;7,8;normal;stack",
            "move_unit;Lupus;4,8",
            "move_unit;Lupus;4,9",
            "move_unit;Lupus;1,9",
            "move_unit;Lupus;1,5",
            "move_unit;Lupus;2,5",
            "",
            "add_portrait;Lupus;FarRight",
            "s;Lupus;Hey, check this out! He's got another statue of himself!",
            "remove_portrait;Lupus",
            "",
            "remove_unit;Anuki;swoosh",
            "add_unit;Anuki;8,8;swoosh",
            "",
            "move_unit;Simon;10,8;no_block;no_follow",
            "",
            "move_unit;Lupus;7,5",
            "move_unit;Lupus;9,5;swoosh",
            "",
            "wait;500",
            "",
            "remove_unit;TopLeft;warp",
            "remove_unit;TopMid;warp",
            "remove_unit;TopRight;warp",
            "",
            "wait;600",
            "",
            "add_portrait;Lupus;Left",
            "multi_add_portrait;Anuki;Right;Simon;FarRight",
            "s;Lupus;Milord and lady, welcome to Gesmen's vault.|I'll start working on the chests.|Mind checking the exit?",
            "multi_remove_portrait;Simon;Anuki;Lupus",
            "",
            "center_cursor;0,2",
            "flicker_cursor;0,2",
            "wait;400",
            "",
            "center_cursor;Lupus",
            "remove_portrait;Simon",
            "move_unit;Simon;0,2;no_block;no_follow",
            "move_unit;Anuki;8,4;no_follow",
            "add_portrait;Lupus;Right",
            "add_portrait;Anuki;Left;mirror",
            "",
            "s;Anuki;Hey, Lupus.{w} Men like him-|You've gotta believe they'll get their due.",
            "remove_unit;Simon;fade",
            "s;Lupus;This is his due.{c:wait;300} He'll wake up tomorrow penniless.|That's enough for me.",
            "s;Anuki;Good. I'm glad you're satisfied.",
            "multi_remove_portrait;Anuki;Lupus",
            "",
            "move_unit;Anuki;0,2",
            "remove_unit;Anuki",
            "",
            "center_cursor;Lupus",
            "remove_skill;Lupus;HiddenFlying;no_banner",
            "level_var;PuzzleCompleted;False",
            "",
            "wait;300",
            "",
            "move_unit;Lupus;9,2",
            "sound;Unlock",
            "show_layer;topleftchestopen",
            "wait;300",
            "",
            "move_unit;Lupus;12,3",
            "sound;Unlock",
            "show_layer;toprightchestopen",
            "wait;300",
            "",
            "move_unit;Lupus;14,2;normal;closest;400",
            "add_portrait;Lupus;Left",
            "s;Lupus;Annika.",
            "",
            "remove_unit;TreasureTop;warp",
            "remove_unit;TreasureBottom;warp",
            "",
            "wait;1200",
            "",
            "s;Lupus;Why?",
            "move_unit;Lupus;17,2;normal;closest;400",
            "",
            "remove_portrait;Lupus",
            "",
            "music_clear",
            "",
            "center_cursor;9,2",
            "add_unit;Gesmen;9,19;immediate",
            "move_unit;Gesmen;9,3;normal;closest;200;no_follow",
            "",
            "# GESMEN CONFRONTATION HERE",
            "move_unit;Gesmen;13,2;normal;closest;200",
            "add_portrait;Gesmen;Left",
            "s;Gesmen;Verstadt's unwelcome confidant.",
            "add_portrait;Lupus;Right;mirror",
            "s;Gesmen;Drop your weapon, thief.",
            "mirror_portrait;Lupus",
            "s;Lupus;Oh, heheh, didn't see you there.",
            "move_unit;Lupus;17,3;no_block;no_follow",
            "s;Lupus;Come here often?",
            "s;Gesmen;Quiet. All I must hear from you is why you are stealing from my mistress's tomb.",
            "multi_remove_portrait;Gesmen;Lupus",
            "",
            "center_cursor;0,2",
            "add_unit;Anuki;0,2",
            "wait;800",
            "move_unit;Anuki;1,4",
            "sound;Weapon Click",
            "wait;1400",
            "hide_layer;statue;immediate",
            "show_layer;statueunarmed;immediate",
            "wait;500",
            "",
            "center_cursor;Gesmen",
            "multi_add_portrait;Gesmen;Left;Lupus;Right",
            "s;Gesmen;I will give you a simple choice:|Tell me and die quickly,|or suffer slowly and painfully.",
            "",
            "move_unit;Anuki;12,2;normal;closest;75;no_follow;no_block",
            "",
            "s;Lupus;It's for Annika, you piece of shit.",
            "multi_remove_portrait;Lupus;Gesmen",
            "interact_unit;Anuki;Gesmen;crit1,end;Silver Blade",
            "kill_unit;Gesmen;no_warn",
            "",
            "add_portrait;Anuki;Left",
            "s;Anuki;Hufh... hufh...",
            "add_portrait;Lupus;Right",
            "s;Lupus;I really would've...{w} Thanks, Anuki.",
            "s;Anuki;...{c:wait;1000} You're alright, Lupus.",
            "multi_remove_portrait;Anuki;Lupus",
            "",
            "add_unit;104;9,19",
            "move_unit;104;9,8;no_follow",
            "add_portrait;SoldierRed;Left",
            "s;SoldierRed;Senator, are you there?",
            "remove_portrait;SoldierRed",
            "",
            "center_cursor;Anuki",
            "add_portrait;Anuki;Left",
            "add_portrait;Lupus;Right",
            "s;Anuki;Damn, we need to move.",
            "multi_remove_portrait;Anuki;Lupus",
            "",
            "move_unit;Anuki;7,2;no_block;no_follow",
            "move_unit;Lupus;9,2",
            "",
            "add_portrait;Lupus;Right",
            "add_portrait;Anuki;Left;mirror",
            "wait;400",
            "mirror_portrait;Anuki",
            "",
            "s;Anuki;What are you doing?!",
            "s;Lupus;I promised you payment.",
            "give_money;6000",
            "",
            "s;Anuki;Move, you imbecile!",
            "multi_remove_portrait;Anuki;Lupus",
            "",
            "move_unit;Anuki;8,2",
            "move_unit;Anuki;0,2;no_block;no_follow",
            "move_unit;Lupus;1,2;no_block",
            "",
            "transition;close;800",
            "",
            "wait;2000",
            "change_background;BlackBackground",
            "transition;open;1",
            "",
            "end_skip",
            "",
            "#speak_style;IntroQuote;Narrator;center;190;5.0;White;chapter-white;None;5;f;None;0.0;None",
            "#speak;Narrator;Hell hath no fury like a lover scorned.;StyleNid=IntroQuote;no_block;hold;no_sound",
            "#wait;6000",
            "#unhold;IntroQuote",
            "",
            "remove_skill;Lupus;Momentum;no_banner",
            "give_skill;Lupus;MomentumPlus",
            "",
            "win_game",
            "",
            "end"
        ]
    }
]