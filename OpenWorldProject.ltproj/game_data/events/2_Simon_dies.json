[
    {
        "name": "Simon dies",
        "trigger": "combat_end",
        "level_nid": "2",
        "condition": "game.check_dead('Simon')",
        "commands": [
            [
                "level_var",
                [
                    "SimonReset",
                    "1"
                ]
            ],
            [
                "transition",
                [
                    "close"
                ]
            ],
            [
                "comment",
                [
                    "#really bad way to do this rn, but this basically removes levels from the main three to force a reset"
                ]
            ],
            [
                "remove_skill",
                [
                    "Simon",
                    "Staggered",
                    "FLAG(no_banner)"
                ]
            ],
            [
                "remove_skill",
                [
                    "Vincent",
                    "Staggered",
                    "FLAG(no_banner)"
                ]
            ],
            [
                "remove_skill",
                [
                    "Luther",
                    "Staggered",
                    "FLAG(no_banner)"
                ]
            ],
            [
                "resurrect",
                [
                    "Simon"
                ]
            ],
            [
                "resurrect",
                [
                    "Vincent"
                ]
            ],
            [
                "resurrect",
                [
                    "Luther"
                ]
            ],
            [
                "set_stats",
                [
                    "Simon",
                    "HP,18,CON,4,MAG,0,DEX,9,SPD,10,PSE,6",
                    "FLAG(immediate)"
                ]
            ],
            [
                "set_unit_level",
                [
                    "Simon",
                    "1",
                    "FLAG(no_warn)"
                ]
            ],
            [
                "set_exp",
                [
                    "Simon",
                    "0",
                    "FLAG(no_warn)"
                ]
            ],
            [
                "set_stats",
                [
                    "Vincent",
                    "HP,21,CON,9,DEX,8,SPD,6,PSE,9",
                    "FLAG(immediate)"
                ]
            ],
            [
                "set_unit_level",
                [
                    "Vincent",
                    "1",
                    "FLAG(no_warn)"
                ]
            ],
            [
                "set_exp",
                [
                    "Vincent",
                    "0",
                    "FLAG(no_warn)"
                ]
            ],
            [
                "set_stats",
                [
                    "Luther",
                    "HP,36,CON,5,MAG,0,DEX,16,SPD,5,PSE,18",
                    "FLAG(immediate)"
                ]
            ],
            [
                "set_unit_level",
                [
                    "Luther",
                    "2",
                    "FLAG(no_warn)"
                ]
            ],
            [
                "set_exp",
                [
                    "Luther",
                    "0",
                    "FLAG(no_warn)"
                ]
            ],
            [
                "comment",
                [
                    "#puts the party back at starting points"
                ]
            ],
            [
                "add_unit",
                [
                    "Simon",
                    "27,2",
                    "immediate"
                ]
            ],
            [
                "remove_unit",
                [
                    "Vincent",
                    "immediate"
                ]
            ],
            [
                "add_unit",
                [
                    "Vincent",
                    "28,3",
                    "immediate"
                ]
            ],
            [
                "remove_unit",
                [
                    "Luther",
                    "immediate"
                ]
            ],
            [
                "comment",
                [
                    "#sets up the enemy placement"
                ]
            ],
            [
                "remove_all_enemies",
                [
                    "FLAG(no_warn)"
                ]
            ],
            [
                "resurrect",
                [
                    "101"
                ]
            ],
            [
                "resurrect",
                [
                    "102"
                ]
            ],
            [
                "resurrect",
                [
                    "103"
                ]
            ],
            [
                "resurrect",
                [
                    "104"
                ]
            ],
            [
                "resurrect",
                [
                    "106"
                ]
            ],
            [
                "resurrect",
                [
                    "107"
                ]
            ],
            [
                "resurrect",
                [
                    "108"
                ]
            ],
            [
                "resurrect",
                [
                    "110"
                ]
            ],
            [
                "resurrect",
                [
                    "111"
                ]
            ],
            [
                "add_unit",
                [
                    "101",
                    "15,4",
                    "immediate"
                ]
            ],
            [
                "has_attacked",
                [
                    "101"
                ]
            ],
            [
                "set_stats",
                [
                    "101",
                    "HP,25",
                    "FLAG(immediate)"
                ]
            ],
            [
                "add_unit",
                [
                    "102",
                    "22,3",
                    "immediate"
                ]
            ],
            [
                "loop_units",
                [
                    "[unit for unit in game.get_all_units()]",
                    "Reset Poise (Global Reset Poise)"
                ]
            ],
            [
                "comment",
                [
                    "#sets the layers"
                ]
            ],
            [
                "show_layer",
                [
                    "layer1",
                    "immediate"
                ]
            ],
            [
                "show_layer",
                [
                    "layer2",
                    "immediate"
                ]
            ],
            [
                "hide_layer",
                [
                    "broken_statue",
                    "immediate"
                ]
            ],
            [
                "hide_layer",
                [
                    "broken_pillar",
                    "immediate"
                ]
            ],
            [
                "hide_layer",
                [
                    "broken_carpet",
                    "immediate"
                ]
            ],
            [
                "comment",
                [
                    "#opens"
                ]
            ],
            [
                "change_background",
                [
                    "BlackBackground"
                ]
            ],
            [
                "transition",
                [
                    "open"
                ]
            ],
            [
                "wait",
                [
                    "600"
                ]
            ],
            [
                "speak",
                [
                    "???",
                    "I won't sacrifice such an important piece just yet."
                ]
            ],
            [
                "sound",
                [
                    "TurnwheelOut"
                ]
            ],
            [
                "wait",
                [
                    "600"
                ]
            ],
            [
                "change_background",
                []
            ],
            [
                "comment",
                [
                    "#dialgue and such"
                ]
            ],
            [
                "flicker_cursor",
                [
                    "Simon"
                ]
            ],
            [
                "add_portrait",
                [
                    "Simon (Simon)",
                    "Left"
                ]
            ],
            [
                "speak",
                [
                    "Simon",
                    "Huh?"
                ]
            ],
            [
                "add_portrait",
                [
                    "Vincent (Vincent)",
                    "Right"
                ]
            ],
            [
                "speak",
                [
                    "Vincent",
                    "You alright, Simon?"
                ]
            ],
            [
                "speak",
                [
                    "Vincent",
                    "You're as pale as a corpse."
                ]
            ],
            [
                "speak",
                [
                    "Simon",
                    "..."
                ]
            ],
            [
                "speak",
                [
                    "Simon",
                    "Yeah, I'm fine."
                ]
            ],
            [
                "speak",
                [
                    "Vincent",
                    "Good. Then let's move."
                ]
            ],
            [
                "speak",
                [
                    "Vincent",
                    "You won't die under my watch."
                ]
            ],
            [
                "speak",
                [
                    "Simon",
                    "Yeah..."
                ]
            ],
            [
                "multi_remove_portrait",
                [
                    "Simon (Simon)",
                    "Vincent (Vincent)"
                ]
            ]
        ],
        "only_once": true,
        "priority": 20
    }
]