[
    {
        "name": "Forge_PickMaterial",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "# gives a default version of the item to the blacksmith for comparison",
            "level_var;ChoosingMaterial;1",
            "if;not u('Blacksmith')",
            "make_generic;Blacksmith;Citizen;1;other;None;Soldier",
            "end",
            "give_item;Blacksmith;{v:ForgeItem};FLAG(no_banner)",
            "if;item_system.is_weapon(game.get_unit('{v:ForgeUnit}'),[item for item in game.get_unit('{v:ForgeUnit}').items if item.uid == {v:ForgeItem}][0])",
            "choice;ForgeType;Material;{eval:','.join([str(var).replace('WeaponMaterial','')+' '+str(game.game_vars[var]) for var in game.game_vars if 'WeaponMaterial' in str(var)])};76;v;top_right;menu_bg_base;;;10,1;left;backable",
            "if;'{v:ForgeType}'!='BACK'",
            "trigger_script_with_args;Forge_Calculate;ForgeType,{v:ForgeType}",
            "else",
            "sound;Select 5",
            "remove_item;Blacksmith;{v:ForgeItem};FLAG(no_banner)",
            "trigger_script_with_args;Forge_PickItem;ForgeUnit,{v:ForgeUnit}",
            "unchoice",
            "end",
            "else",
            "sound;Error",
            "remove_item;Blacksmith;{v:ForgeItem};FLAG(no_banner)",
            "alert;Not Weapon",
            "trigger_script_with_args;Forge_PickItem;ForgeUnit,{v:ForgeUnit}",
            "unchoice",
            "end"
        ]
    }
]