[
    {
        "name": "Dragon AI",
        "trigger": "turn_change",
        "level_nid": "7",
        "condition": "game.turncount>1",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "# determines fireball location",
            "#",
            "# sets a variable for determining whether the dragon will strategically destroy a tome",
            "level_var;FireballCount;0",
            "# not a great way to do this that I can see other than a bunch of code spam for each fireball",
            "# zone 1",
            "if;len(get_units_in_region('Zone1', team='player'))>0",
            "level_var;TargetUnit1;get_units_in_region('Zone1', team='player')[static_random.get_randint(0, len(get_units_in_region('Zone1', team='player'))-1)].nid",
            "level_var;Fireball1;{eval:[(game.get_unit(game.level_vars['TargetUnit1']).position[0]-1,game.get_unit(game.level_vars['TargetUnit1']).position[1]-1),(game.get_unit(game.level_vars['TargetUnit1']).position[0],game.get_unit(game.level_vars['TargetUnit1']).position[1]-1),(game.get_unit(game.level_vars['TargetUnit1']).position[0]+1,game.get_unit(game.level_vars['TargetUnit1']).position[1]-1),(game.get_unit(game.level_vars['TargetUnit1']).position[0]-1,game.get_unit(game.level_vars['TargetUnit1']).position[1]),(game.get_unit(game.level_vars['TargetUnit1']).position[0],game.get_unit(game.level_vars['TargetUnit1']).position[1]),(game.get_unit(game.level_vars['TargetUnit1']).position[0]+1,game.get_unit(game.level_vars['TargetUnit1']).position[1]),(game.get_unit(game.level_vars['TargetUnit1']).position[0]-1,game.get_unit(game.level_vars['TargetUnit1']).position[1]+1),(game.get_unit(game.level_vars['TargetUnit1']).position[0],game.get_unit(game.level_vars['TargetUnit1']).position[1]+1),(game.get_unit(game.level_vars['TargetUnit1']).position[0]+1,game.get_unit(game.level_vars['TargetUnit1']).position[1]+1)]}",
            "inc_level_var;FireballCount;1",
            "end",
            "# zone 2",
            "if;len(get_units_in_region('Zone2', team='player'))>0",
            "level_var;TargetUnit2;get_units_in_region('Zone2', team='player')[static_random.get_randint(0, len(get_units_in_region('Zone2', team='player'))-1)].nid",
            "level_var;Fireball2;{eval:[(game.get_unit(game.level_vars['TargetUnit2']).position[0]-1,game.get_unit(game.level_vars['TargetUnit2']).position[1]-1),(game.get_unit(game.level_vars['TargetUnit2']).position[0],game.get_unit(game.level_vars['TargetUnit2']).position[1]-1),(game.get_unit(game.level_vars['TargetUnit2']).position[0]+1,game.get_unit(game.level_vars['TargetUnit2']).position[1]-1),(game.get_unit(game.level_vars['TargetUnit2']).position[0]-1,game.get_unit(game.level_vars['TargetUnit2']).position[1]),(game.get_unit(game.level_vars['TargetUnit2']).position[0],game.get_unit(game.level_vars['TargetUnit2']).position[1]),(game.get_unit(game.level_vars['TargetUnit2']).position[0]+1,game.get_unit(game.level_vars['TargetUnit2']).position[1]),(game.get_unit(game.level_vars['TargetUnit2']).position[0]-1,game.get_unit(game.level_vars['TargetUnit2']).position[1]+1),(game.get_unit(game.level_vars['TargetUnit2']).position[0],game.get_unit(game.level_vars['TargetUnit2']).position[1]+1),(game.get_unit(game.level_vars['TargetUnit2']).position[0]+1,game.get_unit(game.level_vars['TargetUnit2']).position[1]+1)]}",
            "inc_level_var;FireballCount;1",
            "end",
            "# zone 3",
            "if;len(get_units_in_region('Zone3', team='player'))>0",
            "level_var;TargetUnit3;get_units_in_region('Zone3', team='player')[static_random.get_randint(0, len(get_units_in_region('Zone3', team='player'))-1)].nid",
            "level_var;Fireball3;{eval:[(game.get_unit(game.level_vars['TargetUnit3']).position[0]-1,game.get_unit(game.level_vars['TargetUnit3']).position[1]-1),(game.get_unit(game.level_vars['TargetUnit3']).position[0],game.get_unit(game.level_vars['TargetUnit3']).position[1]-1),(game.get_unit(game.level_vars['TargetUnit3']).position[0]+1,game.get_unit(game.level_vars['TargetUnit3']).position[1]-1),(game.get_unit(game.level_vars['TargetUnit3']).position[0]-1,game.get_unit(game.level_vars['TargetUnit3']).position[1]),(game.get_unit(game.level_vars['TargetUnit3']).position[0],game.get_unit(game.level_vars['TargetUnit3']).position[1]),(game.get_unit(game.level_vars['TargetUnit3']).position[0]+1,game.get_unit(game.level_vars['TargetUnit3']).position[1]),(game.get_unit(game.level_vars['TargetUnit3']).position[0]-1,game.get_unit(game.level_vars['TargetUnit3']).position[1]+1),(game.get_unit(game.level_vars['TargetUnit3']).position[0],game.get_unit(game.level_vars['TargetUnit3']).position[1]+1),(game.get_unit(game.level_vars['TargetUnit3']).position[0]+1,game.get_unit(game.level_vars['TargetUnit3']).position[1]+1)]}",
            "inc_level_var;FireballCount;1",
            "end",
            "# zone 4",
            "if;len(get_units_in_region('Zone4', team='player'))>0",
            "level_var;TargetUnit4;get_units_in_region('Zone4', team='player')[static_random.get_randint(0, len(get_units_in_region('Zone4', team='player'))-1)].nid",
            "level_var;Fireball4;{eval:[(game.get_unit(game.level_vars['TargetUnit4']).position[0]-1,game.get_unit(game.level_vars['TargetUnit4']).position[1]-1),(game.get_unit(game.level_vars['TargetUnit4']).position[0],game.get_unit(game.level_vars['TargetUnit4']).position[1]-1),(game.get_unit(game.level_vars['TargetUnit4']).position[0]+1,game.get_unit(game.level_vars['TargetUnit4']).position[1]-1),(game.get_unit(game.level_vars['TargetUnit4']).position[0]-1,game.get_unit(game.level_vars['TargetUnit4']).position[1]),(game.get_unit(game.level_vars['TargetUnit4']).position[0],game.get_unit(game.level_vars['TargetUnit4']).position[1]),(game.get_unit(game.level_vars['TargetUnit4']).position[0]+1,game.get_unit(game.level_vars['TargetUnit4']).position[1]),(game.get_unit(game.level_vars['TargetUnit4']).position[0]-1,game.get_unit(game.level_vars['TargetUnit4']).position[1]+1),(game.get_unit(game.level_vars['TargetUnit4']).position[0],game.get_unit(game.level_vars['TargetUnit4']).position[1]+1),(game.get_unit(game.level_vars['TargetUnit4']).position[0]+1,game.get_unit(game.level_vars['TargetUnit4']).position[1]+1)]}",
            "inc_level_var;FireballCount;1",
            "end",
            "# zone 5",
            "if;len(get_units_in_region('Zone5', team='player'))>0",
            "level_var;TargetUnit5;get_units_in_region('Zone5', team='player')[static_random.get_randint(0, len(get_units_in_region('Zone5', team='player'))-1)].nid",
            "level_var;Fireball5;{eval:[(game.get_unit(game.level_vars['TargetUnit5']).position[0]-1,game.get_unit(game.level_vars['TargetUnit5']).position[1]-1),(game.get_unit(game.level_vars['TargetUnit5']).position[0],game.get_unit(game.level_vars['TargetUnit5']).position[1]-1),(game.get_unit(game.level_vars['TargetUnit5']).position[0]+1,game.get_unit(game.level_vars['TargetUnit5']).position[1]-1),(game.get_unit(game.level_vars['TargetUnit5']).position[0]-1,game.get_unit(game.level_vars['TargetUnit5']).position[1]),(game.get_unit(game.level_vars['TargetUnit5']).position[0],game.get_unit(game.level_vars['TargetUnit5']).position[1]),(game.get_unit(game.level_vars['TargetUnit5']).position[0]+1,game.get_unit(game.level_vars['TargetUnit5']).position[1]),(game.get_unit(game.level_vars['TargetUnit5']).position[0]-1,game.get_unit(game.level_vars['TargetUnit5']).position[1]+1),(game.get_unit(game.level_vars['TargetUnit5']).position[0],game.get_unit(game.level_vars['TargetUnit5']).position[1]+1),(game.get_unit(game.level_vars['TargetUnit5']).position[0]+1,game.get_unit(game.level_vars['TargetUnit5']).position[1]+1)]}",
            "inc_level_var;FireballCount;1",
            "end",
            "# zone 6",
            "if;len(get_units_in_region('Zone6', team='player'))>0",
            "level_var;TargetUnit6;get_units_in_region('Zone6', team='player')[static_random.get_randint(0, len(get_units_in_region('Zone6', team='player'))-1)].nid",
            "level_var;Fireball6;{eval:[(game.get_unit(game.level_vars['TargetUnit6']).position[0]-1,game.get_unit(game.level_vars['TargetUnit6']).position[1]-1),(game.get_unit(game.level_vars['TargetUnit6']).position[0],game.get_unit(game.level_vars['TargetUnit6']).position[1]-1),(game.get_unit(game.level_vars['TargetUnit6']).position[0]+1,game.get_unit(game.level_vars['TargetUnit6']).position[1]-1),(game.get_unit(game.level_vars['TargetUnit6']).position[0]-1,game.get_unit(game.level_vars['TargetUnit6']).position[1]),(game.get_unit(game.level_vars['TargetUnit6']).position[0],game.get_unit(game.level_vars['TargetUnit6']).position[1]),(game.get_unit(game.level_vars['TargetUnit6']).position[0]+1,game.get_unit(game.level_vars['TargetUnit6']).position[1]),(game.get_unit(game.level_vars['TargetUnit6']).position[0]-1,game.get_unit(game.level_vars['TargetUnit6']).position[1]+1),(game.get_unit(game.level_vars['TargetUnit6']).position[0],game.get_unit(game.level_vars['TargetUnit6']).position[1]+1),(game.get_unit(game.level_vars['TargetUnit6']).position[0]+1,game.get_unit(game.level_vars['TargetUnit6']).position[1]+1)]}",
            "inc_level_var;FireballCount;1",
            "end",
            "# zone 7",
            "if;len(get_units_in_region('Zone7', team='player'))>0",
            "level_var;TargetUnit7;get_units_in_region('Zone7', team='player')[static_random.get_randint(0, len(get_units_in_region('Zone7', team='player'))-1)].nid",
            "level_var;Fireball7;{eval:[(game.get_unit(game.level_vars['TargetUnit7']).position[0]-1,game.get_unit(game.level_vars['TargetUnit7']).position[1]-1),(game.get_unit(game.level_vars['TargetUnit7']).position[0],game.get_unit(game.level_vars['TargetUnit7']).position[1]-1),(game.get_unit(game.level_vars['TargetUnit7']).position[0]+1,game.get_unit(game.level_vars['TargetUnit7']).position[1]-1),(game.get_unit(game.level_vars['TargetUnit7']).position[0]-1,game.get_unit(game.level_vars['TargetUnit7']).position[1]),(game.get_unit(game.level_vars['TargetUnit7']).position[0],game.get_unit(game.level_vars['TargetUnit7']).position[1]),(game.get_unit(game.level_vars['TargetUnit7']).position[0]+1,game.get_unit(game.level_vars['TargetUnit7']).position[1]),(game.get_unit(game.level_vars['TargetUnit7']).position[0]-1,game.get_unit(game.level_vars['TargetUnit7']).position[1]+1),(game.get_unit(game.level_vars['TargetUnit7']).position[0],game.get_unit(game.level_vars['TargetUnit7']).position[1]+1),(game.get_unit(game.level_vars['TargetUnit7']).position[0]+1,game.get_unit(game.level_vars['TargetUnit7']).position[1]+1)]}",
            "inc_level_var;FireballCount;1",
            "end",
            "# zone 8",
            "if;len(get_units_in_region('Zone8', team='player'))>0",
            "level_var;TargetUnit8;get_units_in_region('Zone8', team='player')[static_random.get_randint(0, len(get_units_in_region('Zone8', team='player'))-1)].nid",
            "level_var;Fireball8;{eval:[(game.get_unit(game.level_vars['TargetUnit8']).position[0]-1,game.get_unit(game.level_vars['TargetUnit8']).position[1]-1),(game.get_unit(game.level_vars['TargetUnit8']).position[0],game.get_unit(game.level_vars['TargetUnit8']).position[1]-1),(game.get_unit(game.level_vars['TargetUnit8']).position[0]+1,game.get_unit(game.level_vars['TargetUnit8']).position[1]-1),(game.get_unit(game.level_vars['TargetUnit8']).position[0]-1,game.get_unit(game.level_vars['TargetUnit8']).position[1]),(game.get_unit(game.level_vars['TargetUnit8']).position[0],game.get_unit(game.level_vars['TargetUnit8']).position[1]),(game.get_unit(game.level_vars['TargetUnit8']).position[0]+1,game.get_unit(game.level_vars['TargetUnit8']).position[1]),(game.get_unit(game.level_vars['TargetUnit8']).position[0]-1,game.get_unit(game.level_vars['TargetUnit8']).position[1]+1),(game.get_unit(game.level_vars['TargetUnit8']).position[0],game.get_unit(game.level_vars['TargetUnit8']).position[1]+1),(game.get_unit(game.level_vars['TargetUnit8']).position[0]+1,game.get_unit(game.level_vars['TargetUnit8']).position[1]+1)]}",
            "inc_level_var;FireballCount;1",
            "end",
            "# determines whether the dragon will go after the tomes",
            "if;game.level_vars['FireballCount']<game.turncount and game.turncount%3==0 and (any([u.nid for u in game.get_enemy_units() if 'Acc' in u.nid]) or any([u.nid for u in game.get_enemy_units() if 'Slo' in u.nid]))",
            "# prioritizes slows",
            "# goes for the slow if players are in tight regions",
            "if;(len(get_units_in_region('Zone3', team='player'))>0 or len(get_units_in_region('Zone5', team='player'))>0 or len(get_units_in_region('Zone6', team='player'))>0 or len(get_units_in_region('Zone8', team='player'))>0) and any([u.nid for u in game.get_enemy_units() if 'Slo' in u.nid])",
            "level_var;TargetUnit9;[u for u in game.get_enemy_units() if 'Slo' in u.nid][static_random.get_randint(0, len([u for u in game.get_enemy_units() if 'Slo' in u.nid])-1)].nid",
            "level_var;Fireball9;{eval:[(game.get_unit(game.level_vars['TargetUnit9']).position[0]-1,game.get_unit(game.level_vars['TargetUnit9']).position[1]-1),(game.get_unit(game.level_vars['TargetUnit9']).position[0],game.get_unit(game.level_vars['TargetUnit9']).position[1]-1),(game.get_unit(game.level_vars['TargetUnit9']).position[0]+1,game.get_unit(game.level_vars['TargetUnit9']).position[1]-1),(game.get_unit(game.level_vars['TargetUnit9']).position[0]-1,game.get_unit(game.level_vars['TargetUnit9']).position[1]),(game.get_unit(game.level_vars['TargetUnit9']).position[0],game.get_unit(game.level_vars['TargetUnit9']).position[1]),(game.get_unit(game.level_vars['TargetUnit9']).position[0]+1,game.get_unit(game.level_vars['TargetUnit9']).position[1]),(game.get_unit(game.level_vars['TargetUnit9']).position[0]-1,game.get_unit(game.level_vars['TargetUnit9']).position[1]+1),(game.get_unit(game.level_vars['TargetUnit9']).position[0],game.get_unit(game.level_vars['TargetUnit9']).position[1]+1),(game.get_unit(game.level_vars['TargetUnit9']).position[0]+1,game.get_unit(game.level_vars['TargetUnit9']).position[1]+1)]}",
            "elif;(len(get_units_in_region('Zone1', team='player'))>0 or len(get_units_in_region('Zone2', team='player'))>0 or len(get_units_in_region('Zone4', team='player'))>0 or len(get_units_in_region('Zone7', team='player'))>0) and any([u.nid for u in game.get_enemy_units() if 'Acc' in u.nid])",
            "level_var;TargetUnit9;[u for u in game.get_enemy_units() if 'Acc' in u.nid][static_random.get_randint(0, len([u for u in game.get_enemy_units() if 'Acc' in u.nid])-1)].nid",
            "level_var;Fireball9;{eval:[(game.get_unit(game.level_vars['TargetUnit9']).position[0]-1,game.get_unit(game.level_vars['TargetUnit9']).position[1]-1),(game.get_unit(game.level_vars['TargetUnit9']).position[0],game.get_unit(game.level_vars['TargetUnit9']).position[1]-1),(game.get_unit(game.level_vars['TargetUnit9']).position[0]+1,game.get_unit(game.level_vars['TargetUnit9']).position[1]-1),(game.get_unit(game.level_vars['TargetUnit9']).position[0]-1,game.get_unit(game.level_vars['TargetUnit9']).position[1]),(game.get_unit(game.level_vars['TargetUnit9']).position[0],game.get_unit(game.level_vars['TargetUnit9']).position[1]),(game.get_unit(game.level_vars['TargetUnit9']).position[0]+1,game.get_unit(game.level_vars['TargetUnit9']).position[1]),(game.get_unit(game.level_vars['TargetUnit9']).position[0]-1,game.get_unit(game.level_vars['TargetUnit9']).position[1]+1),(game.get_unit(game.level_vars['TargetUnit9']).position[0],game.get_unit(game.level_vars['TargetUnit9']).position[1]+1),(game.get_unit(game.level_vars['TargetUnit9']).position[0]+1,game.get_unit(game.level_vars['TargetUnit9']).position[1]+1)]}",
            "end",
            "# goes for speed if players are in wide regions",
            "end",
            "# activates the warning",
            "trigger_script;FireballWarn"
        ]
    }
]