[
    {
        "name": "ClearPuzzle2",
        "trigger": "unit_wait",
        "level_nid": "23",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 10,
        "_source": [
            "if;v(\"PuzzleCompleted\") and game.board.get_unit((9,18)) and game.board.get_unit((9,18)).nid == \"Simon\"",
            "",
            "remove_group;PuzzleCrates2",
            "show_layer;middlepuzzlecomplete",
            "if;game.board.get_unit((7,14))",
            "    show_layer;middlepuzzlenotop",
            "elif;game.board.get_unit((7,15))",
            "    show_layer;middlepuzzlenomid",
            "else",
            "    show_layer;middlepuzzlenobottom",
            "end",
            "",
            "reset;Anuki",
            "",
            "move_unit;Lupus;7,15;normal;stack",
            "move_unit;Lupus;2,15",
            "",
            "add_portrait;Lupus;MidLeft",
            "s;Lupus;A little chest, all alone.",
            "add_portrait;Anuki;FarRight",
            "s;Anuki;If you find a Silence staff, toss it here.",
            "",
            "sound;Unlock",
            "show_layer;middlechestopen",
            "wait;300",
            "",
            "s;Lupus;It's... a list of tasks. And it ends with...{w}{br}Ends with...{w}{br}\"Change pass word to Annika\".",
            "s;Anuki;Annika?",
            "s;Lupus;My sister's name... Why would he have that as his pass word?",
            "s;Anuki;Maybe the other pass words were people he's killed.",
            "s;Lupus;Maybe.{w} Let's keep moving.{w}{br}I'll unlock the next gate.",
            "multi_remove_portrait;Lupus;Anuki",
            "",
            "move_unit;Lupus;7,15;normal;stack",
            "move_unit;Lupus;7,11",
            "",
            "wait;400",
            "move_unit;Lupus;8,11;swoosh",
            "move_unit;Lupus;9,11",
            "wait;1300",
            "",
            "remove_unit;MidLeft;warp",
            "remove_unit;MidMid;warp",
            "remove_unit;MidRight;warp",
            "",
            "wait;400",
            "",
            "move_unit;Simon;10,13;no_block;no_follow",
            "move_unit;Anuki;8,13",
            "",
            "add_portrait;Lupus;FarRight",
            "s;Lupus;I'll try and save us some trouble.",
            "",
            "move_unit;Anuki;8,9;no_block;no_follow",
            "move_unit;Simon;10,9;no_block;no_follow",
            "move_unit;Lupus;9,8",
            "",
            "s;Lupus;Annika.",
            "wait;1000",
            "s;Lupus;No luck.",
            "add_portrait;Anuki;Left",
            "s;Anuki;Too bad.",
            "multi_remove_portrait;Anuki;Lupus",
            "",
            "move_unit;Anuki;8,8",
            "move_unit;Simon;10,9",
            "map_anim;Snag;7,8;no_block",
            "map_anim;Snag;11,9",
            "show_layer;topwalldestroyed",
            "wait;500",
            "",
            "move_unit;Simon;9,10",
            "",
            "add_portrait;Lupus;FarRight",
            "s;Lupus;Boost?",
            "remove_portrait;Lupus",
            "",
            "move_unit;Anuki;8,9",
            "move_unit;Lupus;8,9;normal;stack;no_follow",
            "move_unit;Lupus;7,9;swoosh",
            "",
            "wait;800",
            "",
            "move_unit;Anuki;9,8",
            "",
            "level_var;PuzzleCompleted;False",
            "",
            "set_game_board_bounds;0;8;18;10",
            "center_cursor;Anuki",
            "level_var;PuzzleTargets;[(2,9), (3,9), (1,9), (5,8), (6,8), (7,8)]",
            "trigger_script;Global PuzzleSetup",
            "",
            "end"
        ]
    }
]