[
    {
        "name": "PeloposSetup",
        "trigger": null,
        "level_nid": "29",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "show_layer;overlay;immediate",
            "show_layer;overlay2;immediate",
            "",
            "# variable setup",
            "if;v(\"PeloposShop\") == None",
            "    game_var;PeloposShop;\"Angelic Robe, Speedwing, Talisman, Secret Book, EnergyRing, Master Seal\"",
            "    game_var;PeloposInventory;\"1, 1, 1, 1, 1, 3\"",
            "end",
            "",
            "if;v(\"ArenaLayer\") == None",
            "    game_var;ArenaLayer;1",
            "end",
            "",
            "if;v(\"EuclidRecruited\") == None",
            "    game_var;EuclidRecruited;0",
            "end",
            "",
            "if;v(\"LibrarianMet\") == None",
            "    add_talk;Simon;127",
            "else",
            "    remove_unit;127;immediate",
            "end",
            "",
            "# region setup",
            "add_region;Arena;6,4;1,3;event;Arena",
            "add_region;Unforge;26,11;3,3;event;Unforge",
            "add_region;Exit;31,29;1,3;event;Exit",
            "add_region;Exit2;13,0;3,1;event;Exit",
            "add_region;Exit3;0,31;31,1;event;Exit",
            "add_region;Exit4;0,16;1,3;event;Exit",
            "add_region;Exit5;0,29;1,3;event;Exit",
            "add_region;Exit6;31,16;1,3;event;Exit",
            "add_region;Exit7;0,6;1,2;event;Exit",
            "",
            "# talk setup",
            "add_talk;Simon;103",
            "add_talk;Simon;102",
            "add_talk;Simon;106",
            "add_talk;Simon;108",
            "add_talk;Simon;129",
            "",
            "if;v('LysanderRecruited') == 1",
            "    add_unit;Lysander;19,2;immediate",
            "    add_talk;Simon;Lysander",
            "end",
            "",
            "if;v('EuclidRecruited') == 0",
            "    add_talk;Simon;Euclid",
            "end",
            "",
            "if;game.game_vars[\"SenateSide\"]==\"Melodie\"",
            "    remove_unit;Euclid",
            "end",
            "",
            "if;game.game_vars['ArenaLayer'] > 2",
            "    remove_unit;108;immediate",
            "    remove_talk;Simon;108",
            "    move_unit;109;28,17;immediate",
            "    add_talk;Simon;109",
            "end",
            "",
            "center_cursor;Simon;immediate"
        ]
    }
]