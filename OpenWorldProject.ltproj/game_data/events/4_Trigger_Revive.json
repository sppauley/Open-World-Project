[
    {
        "name": "Trigger Revive",
        "trigger": "combat_end",
        "level_nid": "4",
        "condition": "unit2.team=='other' or unit.team=='other'",
        "commands": [
            [
                "if",
                [
                    "unit.team=='other' and unit.get_hp() < 1"
                ]
            ],
            [
                "resurrect",
                [
                    "{unit}"
                ]
            ],
            [
                "change_team",
                [
                    "{unit}",
                    "enemy2"
                ]
            ],
            [
                "add_unit",
                [
                    "{unit}",
                    "{eval:unit2.position}",
                    "",
                    "closest"
                ]
            ],
            [
                "map_anim",
                [
                    "Snag",
                    "{unit}"
                ]
            ],
            [
                "elif",
                [
                    "unit2.team=='other' and unit2.get_hp() < 1"
                ]
            ],
            [
                "resurrect",
                [
                    "{unit2}"
                ]
            ],
            [
                "change_team",
                [
                    "{unit2}",
                    "enemy2"
                ]
            ],
            [
                "add_unit",
                [
                    "{unit2}",
                    "{eval:unit.position}",
                    "",
                    "closest"
                ]
            ],
            [
                "map_anim",
                [
                    "Snag",
                    "{unit2}"
                ]
            ],
            [
                "end",
                []
            ]
        ],
        "only_once": false,
        "priority": 20
    }
]