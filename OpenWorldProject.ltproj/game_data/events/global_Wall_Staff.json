[
    {
        "name": "Wall Staff",
        "trigger": null,
        "level_nid": null,
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "level_var;unit_pos;unit.position",
            "level_var;target_pos;target_pos",
            "",
            "# This is terrible. I don't really care.",
            "",
            "if;v(\"unit_pos\")[1] > v(\"target_pos\")[1]",
            "    # Facing North",
            "    map_anim;LightRune;{v:target_pos};permanent",
            "    make_generic;;Wall;1;enemy2;None;Wall",
            "    add_unit;{created_unit};{v:target_pos};warp;push",
            "",
            "    if;game.board.check_bounds((v(\"target_pos\")[0], v(\"target_pos\")[1] - 1))",
            "        map_anim;LightRune;{e:(v(\"target_pos\")[0], v(\"target_pos\")[1] - 1)};permanent",
            "        make_generic;;Wall;1;enemy2;None;Wall",
            "        add_unit;{created_unit};{e:(v(\"target_pos\")[0], v(\"target_pos\")[1] - 1)};warp;push",
            "    end",
            "",
            "    if;game.board.check_bounds((v(\"target_pos\")[0], v(\"target_pos\")[1] - 2))",
            "        map_anim;LightRune;{e:(v(\"target_pos\")[0], v(\"target_pos\")[1] - 2)};permanent",
            "        make_generic;;Wall;1;enemy2;None;Wall",
            "        add_unit;{created_unit};{e:(v(\"target_pos\")[0], v(\"target_pos\")[1] - 2)};warp;push",
            "    end",
            "",
            "elif;v(\"unit_pos\")[1] < v(\"target_pos\")[1]",
            "    # Facing South",
            "    map_anim;LightRune;{v:target_pos};permanent",
            "    make_generic;;Wall;1;enemy2;None;Wall",
            "    add_unit;{created_unit};{v:target_pos};warp;push",
            "",
            "    if;game.board.check_bounds((v(\"target_pos\")[0], v(\"target_pos\")[1] + 1))",
            "        map_anim;LightRune;{e:(v(\"target_pos\")[0], v(\"target_pos\")[1] + 1)};permanent",
            "        make_generic;;Wall;1;enemy2;None;Wall",
            "        add_unit;{created_unit};{e:(v(\"target_pos\")[0], v(\"target_pos\")[1] + 1)};warp;push",
            "    end",
            "",
            "    if;game.board.check_bounds((v(\"target_pos\")[0], v(\"target_pos\")[1] + 2))",
            "        map_anim;LightRune;{e:(v(\"target_pos\")[0], v(\"target_pos\")[1] + 2)};permanent",
            "        make_generic;;Wall;1;enemy2;None;Wall",
            "        add_unit;{created_unit};{e:(v(\"target_pos\")[0], v(\"target_pos\")[1] + 2)};warp;push",
            "    end",
            "",
            "elif;v(\"unit_pos\")[0] < v(\"target_pos\")[0]",
            "    # Facing East",
            "    map_anim;LightRune;{v:target_pos};permanent",
            "    make_generic;;Wall;1;enemy2;None;Wall",
            "    add_unit;{created_unit};{v:target_pos};warp;push",
            "",
            "    if;game.board.check_bounds((v(\"target_pos\")[0] + 1, v(\"target_pos\")[1]))",
            "        map_anim;LightRune;{e:(v(\"target_pos\")[0] + 1, v(\"target_pos\")[1])};permanent",
            "        make_generic;;Wall;1;enemy2;None;Wall",
            "        add_unit;{created_unit};{e:(v(\"target_pos\")[0] + 1, v(\"target_pos\")[1])};warp;push",
            "    end",
            "",
            "    if;game.board.check_bounds((v(\"target_pos\")[0] + 2, v(\"target_pos\")[1]))",
            "        map_anim;LightRune;{e:(v(\"target_pos\")[0] + 2, v(\"target_pos\")[1])};permanent",
            "        make_generic;;Wall;1;enemy2;None;Wall",
            "        add_unit;{created_unit};{e:(v(\"target_pos\")[0] + 2, v(\"target_pos\")[1])};warp;push",
            "    end",
            "",
            "elif;v(\"unit_pos\")[0] > v(\"target_pos\")[0]",
            "    # Facing West",
            "    map_anim;LightRune;{v:target_pos};permanent",
            "    make_generic;;Wall;1;enemy2;None;Wall",
            "    add_unit;{created_unit};{v:target_pos};warp;push",
            "",
            "    if;game.board.check_bounds((v(\"target_pos\")[0] - 1, v(\"target_pos\")[1]))",
            "        map_anim;LightRune;{e:(v(\"target_pos\")[0] - 1, v(\"target_pos\")[1])};permanent",
            "        make_generic;;Wall;1;enemy2;None;Wall",
            "        add_unit;{created_unit};{e:(v(\"target_pos\")[0] - 1, v(\"target_pos\")[1])};warp;push",
            "    end",
            "",
            "    if;game.board.check_bounds((v(\"target_pos\")[0] - 2, v(\"target_pos\")[1]))",
            "        map_anim;LightRune;{e:(v(\"target_pos\")[0] - 2, v(\"target_pos\")[1])};permanent",
            "        make_generic;;Wall;1;enemy2;None;Wall",
            "        add_unit;{created_unit};{e:(v(\"target_pos\")[0] - 2, v(\"target_pos\")[1])};warp;push",
            "    end",
            "",
            "end"
        ]
    }
]