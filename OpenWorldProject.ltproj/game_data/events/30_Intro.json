[
    {
        "name": "Intro",
        "trigger": "level_start",
        "level_nid": "30",
        "condition": "True",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "center_cursor;Simon;immediate",
            "show_layer;overlay;immediate;no_warn",
            "show_layer;overlay2;immediate;no_warn",
            "add_tag;108;Boss",
            "level_var;RaceWon;False",
            "",
            "remove_unit;Ignis",
            "",
            "add_portrait;Simon;MidLeft",
            "s;Simon;Bandits on this road, as well.|Is there anywhere that isn't...",
            "",
            "trigger_script;Global AppearBySimon;Twins",
            "",
            "add_portrait;Twins;FarLeft",
            "s;Twins;Woah, these aren't just bandits.",
            "s;Simon;What do you mean?",
            "",
            "center_cursor;7,5",
            "flicker_cursor;7,5",
            "wait;400",
            "",
            "s;Twins;Those shamans...|Don't they seem off?",
            "s;Simon;Off? I don't understand.",
            "s;Twins;What Tristan's trying to say is, watch them fidget-|Normal mages don't do that.",
            "s;Simon;Then... who do you think these people are?",
            "s;Twins;We mentioned a sorceress before.{w} Since we were released, we met other victims.|Some moved like this.|Trina believes that these are guards.|Past here must be her \"territory\".",
            "s;Simon;Should we turn back, then?|I don't wish to harm victims like you.",
            "s;Twins;I don't think these are just victims...",
            "",
            "center_cursor;16,9",
            "flicker_cursor;16,9",
            "wait;400",
            "",
            "center_cursor;15,26",
            "flicker_cursor;15,26",
            "wait;400",
            "",
            "center_cursor;Simon",
            "",
            "s;Twins;Like she said, guards.{w} And considering this used to be our home,|and not just a ruin, we're all for fighting.",
            "",
            "s;Simon;Then...",
            "",
            "add_unit;Ignis;8,13",
            "move_unit;Ignis;8,3;no_follow",
            "",
            "add_portrait;Ignis;Right",
            "s;Ignis;Halt, intruder!",
            "",
            "s;Simon;What now? Who are you?",
            "",
            "s;Ignis;A rider! The fastest charioteer of Lady Jane!",
            "s;Twins;So this is her...",
            "s;Ignis;Only the worthy may enter her domain.|Those she has modified, like me, ensure that!",
            "s;Simon;We won't be intimidated. Your \"Lady\" is a monster.",
            "s;Ignis;Hah, you know nothing.{w} She can unlock the body's secrets!|She can create life itself!",
            "s;Simon;I don't believe that.",
            "s;Ignis;If you doubt my lady's power, witness the speed she can grant!|I will leave you groveling at her modifications.",
            "remove_portrait;Ignis",
            "",
            "s;Simon;This isn't a chariot race, it's a-",
            "s;Twins;He isn't listening, Simon.|Let's just beat his game!|I'm tired of talking.",
            "s;Simon;...Very well.{w} Either way, these bandits must be dealt with.",
            "",
            "remove_portrait;Twins",
            "remove_portrait;Simon",
            "trigger_script;Global ConsolidateToSimon;Twins",
            "",
            "# Note: reveal this map on a port hull exit check of Twins' team == player",
            "# That way we can use them in dialogue freely",
            "",
            "for;u;[u.nid for u in game.get_enemy_units() if u.klass == \"Shaman\"]",
            "    set_current_hp;{u};1",
            "endf",
            "",
            "arrange_formation",
            "trigger_script;Global GenericPreps",
            "",
            "s;Narrator;Ignis's items will be sent to your convoy only if you beat him in the race.;StyleNid=hint",
            "",
            "center_cursor;18,3",
            "flicker_cursor;18,3",
            "wait;500",
            "",
            "s;Narrator;To beat Ignis, Simon must reach this tile before he does.;StyleNid=hint",
            "",
            "center_cursor;7,5",
            "flicker_cursor;7,5",
            "wait;500",
            "",
            "s;Narrator;Defeating the dark mages will create muddy terrain in their area.;StyleNid=hint"
        ]
    }
]